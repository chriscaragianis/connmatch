%\input{/home/cjcara01/connmatch/dissert/preamble}
%\begin{document}


\section{The connected matching graph}

We define the connected matching graph $CM(H)$ of a simple graph $H$ to be the distance-2 graph of the line graph of $H$.  $CM(H)$ then has the property that cliques correspond to connected matchings in $H$.

%\subsection{Characterizing connected matching graphs}

%In the following characterization, we will be making use of Krausz's theorem stating that a line graph has an edge partition into cliques wherein each vertex is used in at most two of the cliques.  Furthermore, if $H$ is simple, $L(H)$ has such a partition with the added property that the intersection of any two cliques is at most a single vertex.  

%If $S$ is an edge set, we will denote by $[S]$ the vertex set induced by $S$.  If $\mathcal{S}$ is a collection of edge sets, we will denote by $[\mathcal{S}]$ the collection of vertex sets induced by the members of $\mathcal{S}$.

%\bthm{[Krausz-style characterization]$G$ is the connected matching graph of some simple graph $H$ if and only if there is a hypergraph $\mathcal{Q} = \{Q_1, Q_2, \ldots, Q_k\}$ on $V(G)$ inducing the edges of $G$ such that
%\begin{description}
%	\item[i.] Each $Q_i$ induces the union of a complete bipartite graph ($Q_i^1$ -- $Q_i^2$) and an isolated %vertex $p_i$. 
%	\item[ii.] Each vertex of $G$ is the isolated vertex of at most one element of $\mathcal{Q}$.
	\item[iii.] If $I = Q_i \cap Q_j \neq \emptyset$ with $i\neq j$, then either $I$ is a single vertex and $I %\cap \{p_i, p_j\} = \emptyset$, $I$ is a pair of vertices inducing an edge in $G$, or 
	\begin{description}
		\item[a.] $Q_i^a \cup \{p_i\} = Q_j^b \cup \{p_j\}$.
		\item[b.] $Q_i\cap Q_j = Q_i^a \cup Q_j^b \cup \{p_i,p_j\}$ for some $a,b \in \{1,2\}$.
	\end{description}
\end{description}}
\begin{proof}
	First we show that for any simple graph $H$ with $G = CM(H)$ we can construct a suitable hypergraph $\mathcal{Q}$ on $V(G)$.  Consider a Krausz partition $\mathcal{P} = \{P_1, P_2, \ldots, P_l\}$ of the edges of $L(H)$.  Whenever $i\neq j$ and $[P_i] \cap [P_j] \neq \emptyset$, set $Q_{ij} = [P_i]\cup [P_j]$, and let $p_{ij} =  [P_i]\cap [P_j]$.  For each isolated clique $P_{iso} \in \mathcal{P}$, set $Q_{0k} = [P_{iso}]$.   Together, these sets form a hypergraph $\mathcal{Q}$ covering the vertices  of $L(H)$.  For each $Q_{ij} \in \mathcal{Q}$, if there are $u \in [P_i]$ and $v \in [P_j]$ so that $u,v \neq p_{ij}$ and $u,v \in [P_k]$ for $i,j\neq k$, then remove $u$ and $v$ from $Q_{ij}$. Note that $\mathcal{Q}$ induces all edges of $L(H)$.  Let $G$ be the graph on vertex set $V(L(H))$ obtained by taking the complement of the subgraph induced by each $Q \in \mathcal{Q}$.  Now each  $Q_{ij}$ with $i \neq 0$ induces the union of an isolated vertex $p_{ij}$ and a complete bipartite graph $Q_{ij}^1$ -- $Q_{ij}^2$.  WLOG assume that $Q_{ij}^1 = [P_i]-\{p_{ij}\}$ and $Q_{ij}^2 = [P_j]-\{p_{ij}\}$. If $i = 0$, $Q_{ij}$ now induces an empty graph.   

\noindent\textbf{Claim. } \textit{$G = CM(H)$}

We will show that $G$ is the distance-2 graph of $L(H)$  Take an edge $uv$ from $G$.  Such an edge is contianed in some $Q_{ij}$ with $i \neq 0$, which means that it goes from $[P_j]$ to $[P_k]$ and that neither $u$ nor $v$ is $p_{ij}$.  Furthermore, there is no element of $[\mathcal{P}]$ containing both $u$ and $v$, as otherwise they would have been removed from $Q_{ij}$.  Thus $d_{L(H)}(u,v) \geq 2$.  Futhermore, we know that $[P_i]\cup [P_j] \neq \emptyset$, so $d_{L(H)}(u,v) \leq 2$.  Thus, $G$ is the distance-2 graph of $L(H)$.

\noindent\textbf{Claim. } \textit{$\mathcal{Q}$ is a hypergraph on $V(G)$ that satisfies \textbf{i}, \textbf{ii}, and \textbf{iii} above.}

It is already clear that $\mathcal{Q}$ satisfies \textbf{i}, and induces the edges of $G$.  Suppose then that there is a vertex $v \in V(G)$ such that $v = p_{ij}$ and $v = p_{kl}$ for some $\{i,j\} \neq \{k,l\}$.  Assume without loss of generality that $i,j \neq k$. Then $v \in [P_i]\cap[P_j]\cap[P_k]$, and this corresponds to a vertex used by more than $2$ cliques in the original Krausz partition $\mathcal{P}$ of $E(H)$.  Thus \textbf{ii} is satisfied.  Now suppose that $I = Q_{ij} \cap Q_{kl}$ for some $\{i,j\}\neq \{k,l\}$ and $|I| \geq 2$.  Let $u \in I$.  Suppose that $I \notin \{[P_i],[P_j]\}$ (i.e., \textbf{iii (a)} and \textbf{(b)} do not hold.).  This means that $\{i,j\}\cap \{k,l\} = \emptyset$.  Thus, $u$ is in one of $\{[P_i],[P_j]\}$ and one of $\{[P_k],[P_l]\}$. WLOG say $u\in [P_i]\cap [P_k]$.  Since each vertex is in at most two elements of $[\mathcal{P}]$, $u \notin (P_j \cup P_l)$.  Now suppose that $v \in I$.  Since $H$ is simple, $v\notin [P_i]\cap [P_k]$.  Hence $v \in [P_j]$ or $[P_l]$.  In either case, $uv$ is an edge in $G$.  Finally note that if $I = \{p_{ij}\}$, then either one of $([P_i],[P_j])$ conicides with one of $([P_k], [P_l])$, or $p_{ij}$ is in more than two elements of $[\mathcal{P}]$.  Thus $G$ satisfies condition \textbf{iii}.

Now suppose we have a graph $G$ that has an hypergraph $\mathcal{Q} =  \{Q_1, Q_2, \ldots, Q_k\}$ on $V(G)$ covering the edges of $G$ and satisfying \textbf{i}, \textbf{ii}, and \textbf{iii} above.  We will construct a line graph $L(H)$ for which $G$ is the distance-2 graph.  Let $F$ be the graph obtained by taking the complement on the subgraphs induced by each $Q_i\in \mathcal{Q}$.  $G$ is the distance-2 graph of $F$. To see this, consider an edge $uv \in E(F)$.  Then $uv \notin E(G)$, meaning that $uv \in E(G) \implies d_F(u,v) \geq 1$. If $uv \in G$, then for some $Q_i$, $u \in Q_i^a$, $v\in Q_i^b$ and $u,v \neq p_i$.  Thus in $F$ there is a $u-p_i-v$ path, and $d_F(u,v) \leq 2$.  Each $Q_i$ now induces two cliques joined at $p_i$.  This collection of cliques covers the edges of $F$.  We aim to show that  this collection of cliques forms a Krausz partition of $F$, and that consequently $F$ is a line graph.  

   Since $\mathcal{Q}$ satifies \textbf{iii}, we can be sure that if an edge of $F$ is covered by two cliques, the endpoints of this edge are contained in an intersection of two elements of $\mathcal{Q}$ and do not induce an edge of $G$.  Hence the cliques are identical.   Finally, suppose there is a vertex $v$ in more than two of these cliques, no pair of which are identical.  Then $v \in Q_i^a \cap Q_i^b \cap Q_j^c $ for some $i\neq j$ and $a,b,c \in \{1,2\}$.  This means $v \in Q_i\cap Q_j$ and $v = p_i$.  So we can assume $u$ ($\neq v$) $\in Q_i\cap Q_j$.  However $v=p_i$ dominates the vertices of $Q_i$, meaning $uv$ is an edge in $F$, and consequently not an edge in $G$.  This leaves only the possibility that two of the cliques are identical.  Thus, the cliques induced by $\mathcal{Q}$ (ignoring multiplicity) form a Krausz partition of the edges of $F$, and $F$ is a line graph.

\end{proof}
%\subsection{Characterizing free graphs}

%\bprop{If $G$ is the free graph of a graph $H$, then there is a $2$-regular hypergraph $\mathcal{I}$ spanning $V(G)$ such that 
%\begin{description}
%	\item[i.] Each $I_i\in \mathcal{I}$ induces an empty graph in $G$
%	\item[ii.] For all $I_i, I_j \in \mathcal{I}$,  $I_i \cap I_j \leq 1$
%	\item[iii.] For all $I_i, I_j \in \mathcal{I}$,  $I_i \cap I_j \neq\emptyset$ implies that $I_i\cup I_j$ induces an empty graph in $G$.
%	\item[iv.] $\mathcal{I}$ contains no singletons.
%\end{description}}

%\begin{proof}
%	If each set of $\mathcal{I}$ corresponds to the collection of edges adjacent to a particular vertex with degree greater than two, $\mathcal{I}$ will have the required properties.
%\end{proof}

%1. NO FORBIDDEN SG, MAYBE F.\textit{SPANNING} SG? 2. FOR $\alpha_2$-FREE GRAPHS 
%DEGREES ALL $2k^2-k$, $k = 0, 1, ...$

%One way to find large connected matchings is to consider what edges of $CM(G)$ appear in maximal indpendent sets of $L(G)$ (i.e. near perfect matchings of $G$, provided $\alpha(G) \leq 2$).  If it can be shown that there is a maximal independent set $S$ of $L(G)$ that induces a graph $H$ in $CM(G)$ with $\alpha(H) \geq c|S|$, this would imply Conjecture 6.  If $H$ is empty, this implies Conjecture 3.

%\end{document}
