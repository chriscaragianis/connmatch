%\input{/home/cjcara01/connmatch/dissert/preamble}
%\begin{document}


\section{The connected matching graph}

We define the connected matching graph $CM(H)$ of a simple graph $H$ to be the distance-2 graph of the line graph of $H$.  $CM(H)$ then has the property that cliques correspond to connected matchings in $H$.  

\subsection{Distance-2 graphs}
We say that a graph $G$ has a square root if there is a graph $H$ with $V(G) = V(H)$ and $uv \in E(G)$ if and only if $d_H(u,v) \leq 2$.  The terminology stems from the fact that $G$ has a square root only if the matrix equation $adj(H) = M^2$ has a solution $M$ where $M$ is an adjacency matrix.  Mukhopadhyay (ADD CITATION) charaterized graphs with a square root. 
\bthm{[Mudkhopdhyay] A connected graph $G$ with $n$ vertices $v_1, v_2, \ldots, v_n$ has a square root if and only if some set of $n$ complete subgraphs of $G$ whose union is $G$ can be labeled $C_1, C_2, \ldots, C_n$ so that, for all $i,j = 1, 2, \ldots, n$ the following conditions hold:
\begin{enumerate}
	\item $C_i$ contains $v_i$,
	\item $C_i$ contains $v_j$ if and only if $C_i$ contains $v_i$.
\end{enumerate}}
The idea of the characterization is that each $C_i$ corresponds to the neighborhood of $v_i$ in the square root.  Identifying whether a graph has a square root is NP-complete in general and (FINISH COMPLEXITY)

A distance-2 graph can be thought of as a graph $G$ for which the matrix equation $adj(G) = M^2-M$ has a solution $M$ where $M$ is an adjacency matrix.  Not surprisingly, a characterization very similar to Theorem (LABEL) is possible for distance-2 graphs.

\bthm{A graph $G$ with $n$ vertices $v_1, v_2, \ldots , v_n$ is the distance 2 graph of some graph $H$ if and only if some set of $n$ subgraphs of $G$ whose union is $G$ can be labeled $C_1, C_2, \ldots, C_n$ so that 
\begin{enumerate}
	\item $v_a \notin C_a$ 
	\item For every pair of vertices $v_i, v_j \in C_k$, exactly one of the following holds:
	\begin{enumerate}
		\item $v_iv_j \in E(C_k)$ 
		\item $v_i \in C_j$ and $v_j \in C_i$
	\end{enumerate}
	\item If $C_i \cap C_j \neq \emptyset$, then $v_i, v_j \in V(C_k)$ for some $k$.
	\item If $v_i \in V(C_j)$, then $v_j \in V(C_i)$
\end{enumerate}}
\begin{proof}
Suppose we have a graph $G$ on vertices $v_1, v_2, \ldots, v_n$ and subgraphs $C_1, C_2, \ldots, C_n$ that satisfy the above hypotheses.  We construct a graph $H$ on the same vertex set by adding edges in two steps for each $C_i$.
\begin{description}
	\item[Step 1.] Add the complement of $C_i$.
	\item[Step 2.] Add all edges from $v_i$ to $C_i$.
\end{description}
	We claim that $G$ is now the distance 2 graph of $H$.  Suppose that $d_H(v_i, v_j) = 2$.  We want to show that $v_iv_j \in E(G)$.  Since $d_H(v_i,v_j) \leq 2$, there is some vertex $v_k$ so that $v_iv_k, v_jv_k \in E(H)$.  If both edges were added in step 2, then one of the following occurs
\begin{description}
	\item[Case 1.] $v_i, v_j \in C_k$
	\item[Case 2.] $v_k \in C_i$, $v_k \in C_j$
	\item[Case 3.] $v_k \in C_i, C_j$
\end{description}    
In case 1, distance 2 implies $v_iv_j \notin E(H)$. In particular, this edge was not added in step 2, so $v_i \notin C_j$ and $v_j \notin C_i$.  Condition 2 then implies that if $v_i, v_j \in C_k$ for some $C_k$, then $v_iv_j \in E(G)$.  In case 2, $V(C_i)$ and $V(C_j)$ intersect, implying (by condition 3) again that there is a $V(C_l)$ containing both $v_i$ and $v_j$.  In case 3, condition 4 requires that $v_i, v_j \in C_k$.  In any event, $v_iv_j \in E(G)$.

Now we may assume WLOG that $v_iv_k$ was added to $H$ in step 1.  Suppose $v_jv_k$ was added in step 2. Then either $v_k \in C_j$, implying $C_i \cap C_j \neq \emptyset$, or $v_j \in C_k$ implying $v_i, v_j \in C_k$.  The only remaining possibility is that both $v_iv_k$ and $v_jv_k$ were added in step 1.  Following from two applications of condition 2(b), both $v_i$ and $v_j$ are then in $V(C_k)$.  Sufficiency complete.

For the proof of necessity, we take a graph $H$ and show that its distance two graph $D_2(H)$ has a collection of subgraphs with the necessary properties.  For each vertex $v_i$, let $V(C_i) = N(v_i)$.  That condition 1 holds is immediate.  The vertices of any given $C_i$ are at most distance two apart.  Whenever there is a nonedge in a particular $C_i$ and 2(a) fails, the vertices must be adjacent in $H$, and condition 2(b) holds.  The symmetric property of the neighbor relation shows that conditions 3 and 4 hold as well.  Finally, all distance 2 edges occur between vertices with a common neighbor, so $\bigcup C_i = G$. 
\end{proof}

Again, the characterization makes use of neighborhoods in the underlying graph to decompose the distance-2 graph.  

In attempting to characterize distance-2 graphs of a line graph, we look at the structure of vertex neighborhoods in a line graph.  The neighborhood of any vertex in a line graph induces a pair of cliques plus a matching.  Thus we can narrow the characterization of distance-2 graphs to a class only slightly (REFERENCE???) larger than line graphs.

COROLLARY: dist2 of LCB$^+$ iff $n$ bicliques - matching

This fails to characterize line graphs, in fact, 4 of the 8 Beineke graphs are LCB$^+$.    

%\end{document}
